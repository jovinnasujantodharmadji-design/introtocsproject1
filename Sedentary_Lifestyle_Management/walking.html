<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Walking Tracker</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="overlay" onclick="closeNav()"></div>
    <div id="toast"></div>

    <div id="mySidenav" class="sidenav">
        <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
        <a href="index.html">üìä Dashboard</a>
        <a href="profile.html">üë§ User Profile</a>
        <a href="diet.html">üçé Diet Tracker</a>
        <a href="walking.html" style="color: #6ab3f8;">üë£ Walking</a>
        <a href="water.html">üíß Water Tracker</a>
        <a href="sedentary.html">ü™ë Sedentary Timer</a>
        <a href="stairs.html">ü™ú Stairs Tracker</a>
        <a href="sleep.html">üò¥ Sleep Manager</a>
        <a href="exercise.html">üèÉ Exercise</a>
    </div>

    <div class="header-bar">
        <span class="menu-icon" onclick="openNav()">&#9776;</span>
    </div>

    <div class="container" style="margin-top: 0;">
        <h2>üë£ Walking Tracker</h2>
        
        <div class="stats-grid">
            <div class="stat-card">
                <div id="d-steps" class="stat-number">0</div>
                <div>Steps</div>
            </div>
            <div class="stat-card">
                <div id="d-dist" class="stat-number" style="color:#9b59b6;">0.0</div>
                <div>Km</div>
            </div>
            <div class="stat-card">
                <div id="d-cal" class="stat-number" style="color:#e67e22;">0</div>
                <div>Kcal</div>
            </div>
            <div class="stat-card">
                <div id="d-time" class="stat-number" style="color:#34495e;">0</div>
                <div>Mins</div>
            </div>
        </div>

        <div class="card">
            <h3>üëü Add by Steps</h3>
            <div style="display:flex; gap:10px;">
                <input type="number" id="in-steps" placeholder="Enter steps" style="margin:0;">
                <button class="primary-btn" onclick="addBySteps()">Add</button>
            </div>
            <div style="margin-top:10px; display:flex; gap:5px;">
                <button class="secondary small" onclick="addStepsVal(1000)">+1k</button>
                <button class="secondary small" onclick="addStepsVal(3000)">+3k</button>
                <button class="secondary small" onclick="addStepsVal(5000)">+5k</button>
            </div>
        </div>

        <div class="card">
            <h3>‚è±Ô∏è Add by Time</h3>
            <div style="display:flex; gap:10px;">
                <input type="number" id="in-time" placeholder="Enter minutes" style="margin:0;">
                <button class="primary-btn" onclick="addByTime()">Add</button>
            </div>
            <div style="margin-top:10px; display:flex; gap:5px;">
                <button class="secondary small" onclick="addTimeVal(15)">+15m</button>
                <button class="secondary small" onclick="addTimeVal(30)">+30m</button>
                <button class="secondary small" onclick="addTimeVal(60)">+1h</button>
            </div>
        </div>

        <div style="text-align:center; margin-top:20px;">
            <button class="danger-btn small" onclick="resetAll()">Reset All</button>
        </div>
    </div>

    <script>
        function openNav() { document.getElementById("mySidenav").style.width = "250px"; document.getElementById("overlay").style.display = "block"; }
        function closeNav() { document.getElementById("mySidenav").style.width = "0"; document.getElementById("overlay").style.display = "none"; }
        function showToast(msg) { const t=document.getElementById('toast'); t.textContent=msg; t.className="show"; setTimeout(()=>t.className=t.className.replace("show",""),3000); }

        let totSteps = parseInt(localStorage.getItem('w_steps')) || 0;
        let totTime = parseInt(localStorage.getItem('w_time')) || 0;
        let totDist = parseFloat(localStorage.getItem('w_dist')) || 0;
        let totCal = parseFloat(localStorage.getItem('w_cal')) || 0;

        const weight = Number(localStorage.getItem('profileWeight')) || 70;
        const height = Number(localStorage.getItem('profileHeight')) || 170;

        function updateUI() {
            document.getElementById('d-steps').textContent = totSteps.toLocaleString();
            document.getElementById('d-time').textContent = totTime;
            document.getElementById('d-dist').textContent = totDist.toFixed(2);
            document.getElementById('d-cal').textContent = Math.round(totCal);

            localStorage.setItem('w_steps', totSteps);
            localStorage.setItem('w_time', totTime);
            localStorage.setItem('w_dist', totDist);
            localStorage.setItem('w_cal', totCal);
        }

        function addStepsVal(val) {
            const strideM = (height * 0.414) / 100;
            const distKm = (val * strideM) / 1000;
            const cal = val * 0.04 * (weight / 70);

            totSteps += val;
            totDist += distKm;
            totCal += cal;
            updateUI();
            showToast(`Added ${val} steps`);
        }

        function addBySteps() {
            const val = parseInt(document.getElementById('in-steps').value);
            if(!val || val<=0) return;
            addStepsVal(val);
            document.getElementById('in-steps').value = '';
        }

        function addTimeVal(m) {
            const distKm = m * 0.08; // approx speed
            const cal = 0.0175 * 3.5 * weight * m;

            totTime += m;
            totDist += distKm;
            totCal += cal;
            updateUI();
            showToast(`Added ${m} mins`);
        }

        function addByTime() {
            const val = parseInt(document.getElementById('in-time').value);
            if(!val || val<=0) return;
            addTimeVal(val);
            document.getElementById('in-time').value = '';
        }

        function resetAll() {
            if(confirm('Reset all walking stats?')) {
                totSteps = 0; totTime = 0; totDist = 0; totCal = 0;
                updateUI();
            }
        }

        updateUI();
    </script>
</body>
</html>
